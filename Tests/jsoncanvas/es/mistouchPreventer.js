import{d as t}from"../utilities-9mYNj6lG.js";class e{constructor(t,e){this.preventMt=!1,this.onPointerDown=t=>{const e=this.data.container.getBoundingClientRect();t.clientX<e.left||t.clientX>e.right||t.clientY<e.top||t.clientY>e.bottom?this.preventMt||this.startPrevention():this.preventMt&&(this.preventMistouch.initialX=t.clientX,this.preventMistouch.initialY=t.clientY,this.preventMistouch.lastX=t.clientX,this.preventMistouch.lastY=t.clientY,this.preventMistouch.record=!0)},this.onPointerMove=t=>{this.preventMistouch.record&&(this.preventMistouch.lastX=t.clientX,this.preventMistouch.lastY=t.clientY)},this.onPointerUp=()=>{this.preventMistouch.record&&(this.preventMistouch.record=!1,Math.abs(this.preventMistouch.lastX-this.preventMistouch.initialX)+Math.abs(this.preventMistouch.lastY-this.preventMistouch.initialY)<5&&this.endPrevention())},this.startPrevention=()=>{this.preventionContainer.classList.remove("hidden"),this.data.container.classList.add("numb"),this.preventMt=!0},this.endPrevention=()=>{this.preventMt=!1,this.preventionContainer.classList.add("hidden"),setTimeout(()=>this.data.container.classList.remove("numb"),50)},this.dispose=()=>{window.removeEventListener("pointerdown",this.onPointerDown),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this.preventionContainer.remove(),this._preventionContainer=null},e.register({hooks:{onDispose:[this.dispose]},options:{mistouchPreventer:{preventAtStart:!0}},api:{mistouchPreventer:{startPrevention:this.startPrevention,endPrevention:this.endPrevention}}}),this._preventionContainer=document.createElement("div"),this._preventionContainer.className="prevention-container hidden";const n=document.createElement("div");n.className="prevention-banner",n.innerHTML="Frozen to prevent mistouch, click on to unlock.",this._preventionContainer.appendChild(n),t.container.appendChild(this._preventionContainer),this.preventMistouch={record:!1,lastX:0,lastY:0,initialX:0,initialY:0},e.options.mistouchPreventer.preventAtStart&&this.startPrevention(),this.data=t,window.addEventListener("pointerdown",this.onPointerDown),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)}get preventionContainer(){if(null===this._preventionContainer)throw t;return this._preventionContainer}}export{e as default};
